/*
  This class has been generated by the Code Generator
*  Change History:
*
*	No			Date			         Description												Changed By
*	=====		==========		===========											==========
*
*       VK001               18/09/2018               Security Fix                                                                                                   VKR
*
*
*/


package com.msig.bmsintegrationapp;

import com.cordys.cpc.bsf.busobject.BusObjectConfig;
import com.cordys.cpc.bsf.busobject.BusObjectIterator;
import com.cordys.cpc.bsf.busobject.QueryObject;
import com.eibus.util.logger.CordysLogger;


public class MSIG_BUSINESS_OBJECT extends MSIG_BUSINESS_OBJECTBase
{
    public MSIG_BUSINESS_OBJECT()
    {
        this((BusObjectConfig)null);
    }

    public MSIG_BUSINESS_OBJECT(BusObjectConfig config)
    {
        super(config);
    }

//VK001 - Security Fix - Convertion of LOV to Service

    public static BusObjectIterator<com.msig.bmsintegrationapp.MSIG_BUSINESS_OBJECT> getChannelConflictV2(String APPLICATION_NAME, String STATUS, String CODE, String ID_NUMBER, String CONTRACTTYPE, String EFFECTIVEDATE, String ENDDATE, String INITIATED_ON)
    {
         String queryText = "SELECT CASE_ID, INITIATED_ON,  concat(BusinessRegNo,NRICNo) as SECURITYNO,   OLDIC,   CONTRACTTYPE,   BUSINESSCHANNEL,   EFFECTIVEDATE,   "
        		+ "ENDDATE,  CLNTNUM,  AGENTCODE FROM MSIG_BUSINESS_OBJECT  as PROPOSALDETAIILS with (NOLOCK) "
        		+ "WHERE APPLICATION_NAME=:APPLICATION_NAME and STATUS NOT IN (:STATUS) AND CONCAT(BusinessRegNo,NRICNo) = '"+CODE+"' "
        		+ "AND ISNULL(OLDIC, '') = '"+ID_NUMBER+"' AND CONTRACTTYPE	= :CONTRACTTYPE AND EFFECTIVEDATE = :EFFECTIVEDATE	AND ENDDATE = :ENDDATE 	"
        		+ "AND INITIATED_ON <= :INITIATED_ON";
        QueryObject query = new QueryObject(queryText);
        query.addParameter("APPLICATION_NAME","MSIG_BUSINESS_OBJECT.APPLICATION_NAME ",QueryObject.PARAM_STRING, APPLICATION_NAME);
        query.addParameter("STATUS","MSIG_BUSINESS_OBJECT.STATUS ",QueryObject.PARAM_STRING, STATUS);
        /*query.addParameter("CODE","MSIG_BUSINESS_OBJECT.CODE ",QueryObject.PARAM_STRING, CODE);
        query.addParameter("ID_NUMBER","MSIG_BUSINESS_OBJECT.ID_NUMBER ",QueryObject.PARAM_STRING, ID_NUMBER);*/
        query.addParameter("CONTRACTTYPE","MSIG_BUSINESS_OBJECT.CONTRACTTYPE ",QueryObject.PARAM_STRING, CONTRACTTYPE);
        query.addParameter("EFFECTIVEDATE","MSIG_BUSINESS_OBJECT.EFFECTIVEDATE ",QueryObject.PARAM_STRING, EFFECTIVEDATE);
        query.addParameter("ENDDATE","MSIG_BUSINESS_OBJECT.ENDDATE ",QueryObject.PARAM_STRING, ENDDATE);
        query.addParameter("INITIATED_ON","MSIG_BUSINESS_OBJECT.INITIATED_ON ",QueryObject.PARAM_STRING, INITIATED_ON);
        query.setResultClass(MSIG_BUSINESS_OBJECT.class);
        //logger.error("MSIG_BUSINESS_OBJECT query formed :  "+queryText);
        return query.getObjects();    
 }


}
